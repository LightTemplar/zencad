---
# Траекторная развёртка.

Широкий класс операций ссылочной геометрии представляют операции, построения тела путём трансляции (англ. sweep) некоторого профиля или семейства профилей (_profile_, _profiles_) вдоль заданной траектории _spine_.

## Формально о том, что такое траекторная развёртка:

Траекторная развёртка - это методика построения поверхности путём протягивания профиля вдоль траектории. В общем случае вид профиля непостояннен и может меняться по определённым законам. Таким образом, относительно того, как профиль протягивается вдоль траектории существует два вопроса, или, иными словами, мы должны определить два закона, а именно:

1. Закон, определяющий форму траектории.
2. Закон определяющий форму профиля.

Второй закон удобно разбить на два подзакона: 
1.1. Закон, определяющий форму транслируемого тела.
1.2. Закон, определяющий угловую эволюцию базиса.

По сути, многообразие всех имеющихся в системе операций траекторной трансляции - суть разные формы ответов на эти вопросы. 

### Трёхгранник Фрэне.
UNDER_CONSTRUCT

----------------------

## Линейная развёртка.
Самый часто используемый метод придания объёма плоскому объекту. Операция разворачивает плоское тело _face_ по вектору _vec_. Если вместо вектора указать одну координату, модель будет вытянута в положительном направлении оси Z.
При указании опции center, после выполнения операции модель будет транслирована в направлении обратном vec на его половинную длину.

Сигнатура:
```python
extrude(proto=face, vec=(x,y,z), center=True/False)
extrude(proto=face, vec=z, center=True/False) #equal: vec=(0,0,z)
face.extrude(vec) #alternate
```

Пример:
```python
ngon(r=10, n=10)
ngon(r=10, n=10).extrude(4)
extrude((1, 0, 4), ngon(r=10, n=10))
extrude(textshape(text="TextShape", fontpath=FONTPATH, size=100), 20)
```

![](../images/generic/extrude0.png)
![](../images/generic/extrude1.png)  
![](../images/generic/extrude2.png)
![](../images/generic/extrude3.png)

---
## Развёртка профиля по траектории. Развёртка с изменяемым профилем.
Операция строит тело по одному профилю или набору сменяющих друг друга профилей _profiles_, вытянутых по траектории _spine_.
Указание опции _frenet_ активирует закон изменения углового положения профиля в соответствии с трёхгранником Френе-Серре. Опция _binormal_ активирует закон изменения углового положения профиля в соответствии с константной бинормалью.

Сигнатура:
```python
pipe_shell(profiles, spine, frenet=False, binormal=vector3(0,0,0), solid=True)
```

Примеры:
```python
```

![](../images/generic/sweep0.png)
![](../images/generic/sweep1.png)  
![](../images/generic/sweep2.png)
![](../images/generic/sweep3.png)  
![](../images/generic/sweep4.png)

---
## Тело вращения.
Операция создания тела вращения от прототипа _proto_. При необходимости создания сектора задаётся угол _yaw_.
Если указан радиус _r_, объект разворачивается на 90 градусов вокруг оси X и смещается по оси X на растояние равное радиусу _r_.

Сигнатура:
```python
revol(profile, r=None, yaw=deg(360))
```

Пример:
```python
```

![](../images/generic/revol0.png)
![](../images/generic/revol1.png)  
![](../images/generic/revol2.png)
![](../images/generic/revol3.png)  

---
## Тело вращения. (расширенная версия).
Расширенная версия операции _revol_. Строит тело вращения от прототипа _proto_ на интервале угла поворота _yaw_. Указание опции _roll_ позволяет изменять угол поворота прототипа по мере прохождения интервала. Тело строится по опорным копиям тела прототипа, количество копий задаётся опцией _n_. _nparts_ определяет количество сегментов результирующего тела вращения.

Сигнатура:
```python
revol2(profile, r, n=30, yaw=(0,deg(360)), roll=(0,0), nparts=None)
```

Примеры:
```python
revol2(profile=square(10, center=True), r=20, n=60, yaw=(0,deg(360)), roll=(0,deg(360)))
```

![](../images/generic/revol20.png)
